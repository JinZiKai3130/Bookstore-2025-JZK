# 总体设计文档

## BookStore 2025
**项目名称** 书店管理系统
**作者** 金子凯

## 概述
本项目依据相关规范，设计并开发了一个功能齐全的书店管理系统。系统包含账户管理、图书管理、销售管理与日志系统等模块，可全面支持书店的日常运营需求。程序可将数据持久化保存至文件中，确保数据的连续存储与读取。在初次启动时，系统将自动进行初始化，并创建一个具备超级管理员权限的默认账户（root）。

## 总体实现逻辑
**账户**： 使用一个栈结构来维护当前的登录状态，栈中存储当前的`UserID`，当前权限为栈顶`UserID`对应的权限。

**书**： 用一个结构体来确认当前选择的这本书，并在此基础之上进行修改等操作。

**日志**： 以`time`为key，存储在文件中。每次操作结束，进行写入，出现查询需求也做出相应的反应。

如果出现了任何错误，直接异常抛出

## 数据存储
### 人员信息
```
struct User {
    std::string UserID;
    std::string Password;
    std::string UserName;
    int privilege;
};
```

```
class NodeHead_for_Users{
    // 同文件存储测试
}

class NodeBody_for_Users{
    // 同文件存储测试
}
```

```
class UserManager {
    
    std::stack<User*> login_stack;

public:
    void login(const std::string& userid,
               const std::string& password = "");
    void logout();

    void register(const std::string& userid, 
                  const std::string& password,
                  const std::string& username);
    void changePassword(const std::string& userid, 
                        const std::string& current_pwd,
                        const std::string& new_pwd);
    void addUser(const std::string& userid,
                 const std::string& password,
                 int privilege,
                 const std::string& username);
    void deleteUser(const std::string& userid);
}
```

### 图书信息
```

```